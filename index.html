<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Page</title>
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-N483Z9SG');</script>
    <!-- End Google Tag Manager -->
</head>
<body>

    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N483Z9SG"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    

    <h1>Google Tag Manager Test Page</h1>
    
    <div id="key1"></div>
    <div id="key2"></div>
    
    <script>
        // Function to get URL query parameters
        function getQueryParams() {
            var params = {};
            var search = window.location.search.substring(1);
            if (search) {
                var parts = search.split('&');
                for (var i = 0; i < parts.length; i++) {
                    var pair = parts[i].split('=');
                    params[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);
                }
            }
            return params;
        }

        // Extract the query parameters
        var queryParams = getQueryParams();
        
        // Push the query parameters to the Data Layer
        window.dataLayer = window.dataLayer || [];
        window.dataLayer.push({
            'event': 'urlVariables',
            'KEY1': queryParams['key1'],
            'KEY2': queryParams['key2']
        });

        // Use the Data Layer variables to set the content of the divs
        window.dataLayer.push(function() {
            var key1Value = window.dataLayer.find(function(item) { return item.KEY1; }).KEY1;
            var key2Value = window.dataLayer.find(function(item) { return item.KEY2; }).KEY2;
            document.getElementById('key1').innerHTML = 'Key1: ' + key1Value;
            document.getElementById('key2').innerHTML = 'Key2: ' + key2Value;
        });
    </script>
</body>
</html>
